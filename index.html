<!DOCTYPE html>
<html>
<head>
    <title>The Sweet Tooth - Design Template</title>
    <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@900&family=Poppins:wght@400;500;600&family=Roboto&family=Open+Sans&family=Lato&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Poppins', sans-serif;
            display: flex;
            flex-direction: column;
            align-items: center;
            background: #f0f0f0;
            padding: 20px;
            margin: 0;
        }

        .business-header {
            width: 100%;
            text-align: center;
            padding: 20px 0;
            margin-bottom: 20px;
            background: #ff69b4;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }

        .page-title {
            font-family: 'Montserrat', sans-serif;
            font-weight: 900;
            font-size: 32px;
            color: white;
            margin: 0;
            text-transform: uppercase;
            letter-spacing: 1px;
        }

        .controls {
            margin-bottom: 20px;
            background: white;
            padding: 20px;
            border-radius: 8px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
            width: 300px;
        }

        .control-group {
            margin-bottom: 15px;
            padding-bottom: 15px;
            border-bottom: 1px solid #eee;
        }

        .size-controls {
            display: flex;
            align-items: center;
            gap: 10px;
            margin: 10px 0;
        }

        .size-slider {
            flex-grow: 1;
            width: 100%;
        }

        .control-btn {
            padding: 5px 10px;
            background: #f0f0f0;
            border: 1px solid #ddd;
            border-radius: 4px;
            cursor: pointer;
            width: 100%;
            margin: 5px 0;
        }

        .control-btn:hover {
            background: #e0e0e0;
        }

        #size-display {
            min-width: 50px;
            text-align: center;
        }

        .preview-shape {
            border: 2px solid rgba(51, 51, 51, 0.3);
            overflow: hidden;
            position: relative;
            background: white;
            display: flex;
            align-items: center;
            justify-content: center;
            margin: 20px;
        }

        .oreo {
            width: 1.5in;
            height: 1.5in;
            border-radius: 50%;
        }

        .business-card {
            width: 3.9in;
            height: 2in;
        }

        .plaque-a {
            width: 6.3in;
            height: 2.2in;
        }

        .plaque-b {
            width: 6.4in;
            height: 4in;
        }

        .paver {
            width: 5.5in;
            height: 2.2in;
        }

        .image-container {
            width: 100%;
            height: 100%;
            position: absolute;
            display: flex;
            align-items: center;
            justify-content: center;
            overflow: hidden;
        }

        #preview-image {
            max-width: 90%;
            max-height: 90%;
            object-fit: contain;
            transform-origin: center;
            transition: transform 0.3s ease;
        }

        #preview-text {
            position: absolute;
            text-align: center;
            word-wrap: break-word;
            max-width: 90%;
            z-index: 2;
        }

        .saved-designs-section {
            margin-top: 15px;
        }

        .saved-designs-list {
            max-height: 150px;
            overflow-y: auto;
            margin: 10px 0;
            border: 1px solid #ddd;
            border-radius: 4px;
        }

        .saved-design-item {
            padding: 8px;
            border-bottom: 1px solid #eee;
            cursor: pointer;
        }

        .saved-design-item:hover {
            background: #f5f5f5;
        }

        .print-layout {
            display: none;
            background: white;
            width: 8.5in;
            height: 11in;
            position: relative;
            box-sizing: border-box;
            margin: 0 auto;
        }

        .print-grid {
            padding: 0.5in;
            display: grid;
            gap: 0.3in;
            justify-content: center;
        }

        .quantity-selector {
            margin-bottom: 15px;
        }

        .quantity-selector select,
        .quantity-selector input {
            margin-top: 5px;
        }

        .action-buttons {
            margin: 20px 0;
            display: flex;
            gap: 10px;
        }

        button {
            padding: 10px 20px;
            background: #ff69b4;
            color: white;
            border: none;
            border-radius: 4px;
            cursor: pointer;
            font-family: 'Poppins', sans-serif;
        }

        button:hover {
            background: #ff1493;
        }

        @media print {
            @page {
                size: letter;
                margin: 0;
            }
            
            body * {
                visibility: hidden;
            }
            
            .print-layout,
            .print-layout * {
                visibility: visible;
            }

            .print-layout {
                position: absolute;
                left: 0;
                top: 0;
            }
        }
    </style>
</head>
<body>
    <div class="business-header">
        <h1 class="page-title">The Sweet Tooth</h1>
    </div>
    
    <div class="template-container">
        <div class="controls">
            <div class="control-group">
                <label for="shape-select">Select Shape:</label>
                <select id="shape-select">
                    <option value="oreo">Oreo (1.5" circle)</option>
                    <option value="business-card">Business Card (3.9" × 2")</option>
                    <option value="plaque-a">Plaque A (6.3" × 2.2")</option>
                    <option value="plaque-b">Plaque B (6.4" × 4")</option>
                    <option value="paver">Artistic Paver (5.5" × 2.2")</option>
                </select>

                <div class="quantity-selector">
                    <label for="print-quantity">Print Quantity:</label>
                    <select id="print-quantity">
                        <option value="full">Full Page</option>
                        <option value="half">Half Page</option>
                        <option value="single">Single</option>
                        <option value="custom">Custom Amount</option>
                    </select>
                    <div id="custom-quantity" style="display: none;">
                        <input type="number" min="1" max="20" value="1">
                    </div>
                </div>
            </div>

            <div class="control-group">
                <label for="image-upload">Upload Image:</label>
                <input type="file" id="image-upload" accept="image/*">
                
                <div class="size-controls">
                    <button class="control-btn" onclick="adjustImageSize('decrease')">-</button>
                    <input type="range" id="size-slider" min="10" max="200" value="100">
                    <button class="control-btn" onclick="adjustImageSize('increase')">+</button>
                    <span id="size-display">100%</span>
                </div>
                <button class="control-btn" onclick="resetImageSize()">Reset Size</button>

                <div id="rotation-controls" style="display: none;">
                    <label>Rotate Image:</label>
                    <input type="range" id="rotation-slider" min="0" max="360" value="0">
                    <div style="display: flex; justify-content: space-between;">
                        <button onclick="rotateImage(-90)" class="control-btn">↺ 90°</button>
                        <span id="rotation-value">0°</span>
                        <button onclick="rotateImage(90)" class="control-btn">↻ 90°</button>
                    </div>
                </div>
            </div>

            <div class="control-group">
                <label for="text-input">Add Text:</label>
                <input type="text" id="text-input" placeholder="Enter text here">
                
                <label for="font-family">Font Style:</label>
                <select id="font-family">
                    <option value="Poppins">Poppins</option>
                    <option value="Roboto">Roboto</option>
                    <option value="Open Sans">Open Sans</option>
                    <option value="Lato">Lato</option>
                    <option value="Montserrat">Montserrat</option>
                </select>
                
                <label for="font-size">Font Size:</label>
                <input type="number" id="font-size" value="20" min="8" max="72">
                
                <label for="text-color">Text Color:</label>
                <input type="color" id="text-color" value="#000000">
            </div>

            <div class="control-group">
                <label for="border-width">Border Thickness (px):</label>
                <input type="number" id="border-width" value="2" min="0" max="10" step="1">
            </div>

            <div class="saved-designs-section">
                <label for="design-name">Save Current Design:</label>
                <input type="text" id="design-name" placeholder="Enter design name">
                <button onclick="saveCurrentDesign()" class="control-btn">Save Design</button>
                
                <div class="saved-designs-list" id="saved-designs">
                    <!-- Saved designs will be listed here -->
                </div>
                
                <button onclick="loadSelectedDesign()" class="control-btn">Load Selected Design</button>
                <button onclick="deleteSelectedDesign()" class="control-btn">Delete Selected Design</button>
            </div>
        </div>

        <div id="preview-container" class="preview-shape oreo">
            <div class="image-container">
                <img id="preview-image">
            </div>
            <div id="preview-text"></div>
        </div>
    </div>

    <div class="action-buttons">
        <button onclick="createPrintLayout()">Create Print Layout</button>
        <button onclick="window.print()">Print</button>
    </div>

    <div class="print-layout">
        <div id="print-grid" class="print-grid"></div>
    </div>

    <script>
        const imageUpload = document.getElementById('image-upload');
        const textInput = document.getElementById('text-input');
        const fontFamily = document.getElementById('font-family');
        const fontSize = document.getElementById('font-size');
        const textColor = document.getElementById('text-color');
        const borderWidth = document.getElementById('border-width');
        const previewImage = document.getElementById('preview-image');
        const previewText = document.getElementById('preview-text');
        const shapeSelect = document.getElementById('shape-select');
        const previewContainer = document.getElementById('preview-container');
        const rotationControls = document.getElementById('rotation-controls');
        const rotationSlider = document.getElementById('rotation-slider');
        const rotationValue = document.getElementById('rotation-value');
        const sizeSlider = document.getElementById('size-slider');
        const sizeDisplay = document.getElementById('size-display');
        const printQuantity = document.getElementById('print-quantity');
        const customQuantity = document.getElementById('custom-quantity');
        const designName = document.getElementById('design-name');
        const savedDesignsList = document.getElementById('saved-designs');
        
        let currentImageDataUrl = '';
        let currentRotation = 0;
        let currentScale = 1;

        // Handle print quantity selection
        printQuantity.addEventListener('change', function() {
            customQuantity.style.display = 
                this.value === 'custom' ? 'block' : 'none';
        });

        function getQuantityCount() {
            switch(printQuantity.value) {
                case 'full': return 20;
                case 'half': return 10;
                case 'single': return 1;
                case 'custom': return parseInt(customQuantity.querySelector('input').value) || 1;
                default: return 20;
            }
        }

        // Save and load functionality
        function saveCurrentDesign() {
            if (!designName.value.trim()) {
                alert('Please enter a name for your design');
                return;
            }

            const design = {
                name: designName.value,
                shape: shapeSelect.value,
                image: currentImageDataUrl,
                text: textInput.value,
                fontFamily: fontFamily.value,
                fontSize: fontSize.value,
                textColor: textColor.value,
                borderWidth: borderWidth.value,
                rotation: currentRotation,
                scale: currentScale
            };

            let savedDesigns = JSON.parse(localStorage.getItem('savedDesigns') || '{}');
            savedDesigns[design.name] = design;
            localStorage.setItem('savedDesigns', JSON.stringify(savedDesigns));
            
            updateSavedDesignsList();
            designName.value = '';
        }

        function updateSavedDesignsList() {
            const designs = JSON.parse(localStorage.getItem('savedDesigns') || '{}');
            savedDesignsList.innerHTML = '';
            
            Object.keys(designs).forEach(name => {
                const div = document.createElement('div');
                div.className = 'saved-design-item';
                div.textContent = name;
                div.onclick = () => loadDesign(name);
                savedDesignsList.appendChild(div);
            });
        }

        function loadDesign(name) {
            const designs = JSON.parse(localStorage.getItem('savedDesigns') || '{}');
            const design = designs[name];
            
            if (design) {
                shapeSelect.value = design.shape;
                shapeSelect.dispatchEvent(new Event('change'));
                
                if (design.image) {
                    currentImageDataUrl = design.image;
                    previewImage.src = design.image;
                }
                
                textInput.value = design.text || '';
                fontFamily.value = design.fontFamily;
                fontSize.value = design.fontSize;
                textColor.value = design.textColor;
                borderWidth.value = design.borderWidth;
                
                currentRotation = design.rotation || 0;
                currentScale = design.scale || 1;
                
                updateText();
                updateBorder();
                updateRotation();
                updateImageSize();
            }
        }

        function deleteSelectedDesign() {
            const selected = savedDesignsList.querySelector('.selected');
            if (!selected) return;
            
            if (confirm(`Delete design "${selected.textContent}"?`)) {
                let designs = JSON.parse(localStorage.getItem('savedDesigns') || '{}');
